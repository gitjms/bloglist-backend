(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,n){e.exports=n(86)},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),c=n.n(l),o=n(16),u=n(13),i=n(46),s=n(47),m=n(33),f=n(19),p=n(1),b=n.n(p),d=n(4),g=n(14),v=n.n(g),E=null,h={getAll:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.a.get("/api/blogs"),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},a=v.a.post("/api/blogs",t,n),e.next=4,a;case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(b.a.mark((function e(t,n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.put("".concat("/api/blogs","/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},a=v.a.delete("".concat("/api/blogs","/").concat(t),n),e.next=4,a;case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},y=function(){return function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.create(e);case 2:a=t.sent,n({type:"NEW_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.remove(e);case 2:a=t.sent,n({type:"DELETE_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.update(e.id,Object(f.a)(Object(f.a)({},e),{},{likes:e.likes+1}));case 2:a=t.sent,n({type:"LIKE_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e,t,n){return Object(f.a)(Object(f.a)({},function(e,t){return e.find((function(e){return e.id===t}))}(e,t)),{},{likes:n})},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"NEW_BLOG":case"DELETE_BLOG":return[].concat(Object(m.a)(e),[t.data]);case"LIKE_BLOG":return e.map((function(n){return n.id!==t.data.id?n:k(e,t.data.id,t.data.likes)}));default:return e}},x=[],S=function(e,t){return x.forEach((function(e){return"number"===typeof e?clearTimeout(e):e})),function(){var n=Object(d.a)(b.a.mark((function n(a){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(L(e));case 2:x.push(setTimeout((function(){a(L(null)),x=[]}),1e3*t));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},L=function(e){return{type:"SET_MESSAGE",text:e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.text;default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return{type:t.type,content:t.content};default:return e}},C=Object(u.combineReducers)({blogs:N,message:T,filter:B}),I=Object(u.createStore)(C,Object(s.composeWithDevTools)(Object(u.applyMiddleware)(i.a)));h.getAll().then((function(e){return I.dispatch(y())}));var _=I,F=n(12),A=n(9),G=function(){var e=Object(F.d)((function(e){var t=e.message;return null!==t?t:null}));return null===e?null:r.a.createElement("div",{style:{color:"rgb(255, 0, 0)",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},e)},D={login:function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(e){var t=e.createBlog,n=Object(a.useState)(""),l=Object(A.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(""),i=Object(A.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(""),p=Object(A.a)(f,2),b=p[0],d=p[1];return r.a.createElement("div",{className:"col-auto",id:"boxed"},r.a.createElement("br",null),r.a.createElement("b",null,"Add a new blog"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:c,author:s,url:b}),o(""),m(""),d("")}},r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"title"},"title:"),r.a.createElement("input",{id:"title",type:"text",className:"form-control",value:c,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"author"},"author:"),r.a.createElement("input",{id:"author",type:"text",className:"form-control",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"url"},"url:"),r.a.createElement("input",{id:"url",type:"text",className:"form-control",value:b,onChange:function(e){d(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",id:"add-button",type:"submit",style:{float:"left",marginTop:"12px"}},"add"))))},U=function(e){var t=e.loginUser,n=Object(a.useState)(""),l=Object(A.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(""),i=Object(A.a)(u,2),s=i[0],m=i[1];return r.a.createElement("div",{className:"form-group-inline"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:c,password:s}),o(""),m("")}},r.a.createElement("div",{align:"left",className:"form-group-inline"},r.a.createElement("label",{id:"formlabel",htmlFor:"username"},"username:"),r.a.createElement("input",{id:"username",type:"text",className:"form-control",name:"Username",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("label",{id:"formlabel",htmlFor:"password"},"password:"),r.a.createElement("input",{id:"password",type:"text",className:"form-control",name:"Password",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement("button",{className:"btn btn-primary",id:"login-button",type:"submit",style:{float:"left"}},"login")))},z=n(3);function J(e,t){return t.likes-e.likes}var M={likeBlog:j,deleteBlog:w,setMessage:S},W=Object(F.b)((function(e){return"ALL"===e.filter?{blogs:e.blogs.sort(J)}:{blogs:e.blogs.filter((function(t){return t.content.toLowerCase().includes(e.filter.content.toLowerCase())})).sort(J)}}),M)((function(e){var t=e.props,n=Object(z.f)().id,a=t.blogs.find((function(e){return e.id===n}));return r.a.createElement("div",null,r.a.createElement("li",{className:"list-group-item"},a.title," by ",a.author),r.a.createElement("br",null),r.a.createElement("li",{className:"list-group-item"},a.url),r.a.createElement("li",{className:"list-group-item"},"has ",a.likes,r.a.createElement("button",{type:"button",className:"btn btn-success",id:"like-button",onClick:function(){j(a.id),S("you liked '".concat(a.content,"'"),5)}},"like")),r.a.createElement("li",{className:"list-group-item"},"added by ",a.user.name,t.user.name===a.user.name&&r.a.createElement("button",{type:"button",id:"delete-button",className:"btn btn-warning",onClick:function(){w(a.id),S("you deleted '".concat(a.content,"'"),5)}},"delete")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){t.setVisible(!1),t.history.goBack(),t.history=[]}},"back")))})),V=function(e){var t={display:e.visible?"none":""},n={display:e.visible?"":"none"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:t},r.a.createElement("h2",null,"Blogs"),r.a.createElement("ul",null,e.blogs.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(o.b,{to:"/blogs/".concat(t.id),onClick:function(){e.setVisible(!0),e.history.push("/")}},t.title))})))),r.a.createElement("div",{style:n},r.a.createElement(z.c,null,r.a.createElement(z.a,{path:"/blogs/:id"},r.a.createElement(W,{props:e})))))},H=function(){var e=Object(F.c)();return r.a.createElement("div",{className:"col-auto"},r.a.createElement("form",{onChange:function(t){t.preventDefault();var n=t.target.value;e(function(e,t){return{type:"SET_FILTER",content:t}}(0,n))}},r.a.createElement("label",{htmlFor:"filter"},"filter shown with:"),r.a.createElement("input",{name:"filter",type:"text",className:"form-control"})))},K=function(){return r.a.createElement("div",{style:{color:"gray",fontStyle:"italic",fontSize:16}},r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("center",null,r.a.createElement("em",null,"Bloglist app, Full Stack Web Development"),r.a.createElement("br",null),r.a.createElement("em",null,"University of Helsinki 2020")))},q=r.a.forwardRef((function(e,t){var l=n(77).animateScroll,c=Object(a.useState)(!1),o=Object(A.a)(c,2),u=o[0],i=o[1],s={display:u?"none":""},m={display:u?"":"none"},f=function(){i(!u),u&&l.scrollToTop()};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:f}})),r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("div",{style:s},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:f},e.buttonLabel)),r.a.createElement("div",{style:m,className:"togglableContent"},e.children,r.a.createElement("button",{className:"btn btn-primary",type:"submit",style:{float:"right"},onClick:f},"cancel")))}));q.displayName="Togglable";var P=q,Q=function(){var e=Object(F.c)();Object(a.useEffect)((function(){e(y())}),[e]);var t=Object(a.useState)(null),n=Object(A.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),u=Object(A.a)(o,2),i=u[0],s=u[1],m=Object(a.useRef)(),f=Object(a.useRef)();Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBloglistappUser");if(e){var t=JSON.parse(e);s(t),h.setToken(t.token)}}),[]);var p=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.username&&""!==t.password){e.next=5;break}c("both fields are required"),setTimeout((function(){c(null)}),4e3),e.next=18;break;case 5:return e.prev=5,e.next=8,D.login(t);case 8:n=e.sent,window.localStorage.setItem("loggedBloglistappUser",JSON.stringify(n)),h.setToken(n.token),s(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),c("wrong username or password"),setTimeout((function(){c(null)}),4e3);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{s(null),window.localStorage.clear()}catch(n){c("".concat(n)),setTimeout((function(){c(null)}),4e3)}window.location.reload(),console.log("logged out successfully");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{id:"nav",className:"navbar navbar-light bg-light"},r.a.createElement("strong",null,"Bloglist"),null!==i?r.a.createElement("div",null,i.name," logged in",r.a.createElement("button",{className:"btn btn-primary ml-2",id:"logout-button",type:"submit",onClick:g},"Logout")):r.a.createElement(P,{buttonLabel:"sign in",ref:f},r.a.createElement(U,{loginUser:p}))),r.a.createElement("div",{className:"container"},r.a.createElement(G,{message:l}),null!==i&&r.a.createElement(P,{buttonLabel:"new blog",ref:m},r.a.createElement(R,{createBlog:O})),null!==i&&r.a.createElement("div",{className:"col-auto"},r.a.createElement(H,null),r.a.createElement(V,null)),r.a.createElement(K,null)))};n(85);c.a.render(r.a.createElement(o.a,null,r.a.createElement(F.a,{store:_},r.a.createElement(Q,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.15f58669.chunk.js.map
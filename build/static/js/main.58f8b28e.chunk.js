(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,n){e.exports=n(61)},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),c=n.n(l),o=n(2),i=n.n(o),u=n(4),s=n(1),m=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error",style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},f=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"message",style:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},d=n(5),b=n.n(d),p=null,g={getAll:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get("/api/blogs"),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},a=b.a.post("/api/blogs",t,n),e.next=4,a;case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.put("".concat("/api/blogs","/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},a=b.a.delete("".concat("/api/blogs","/").concat(t),n),e.next=4,a;case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){p="bearer ".concat(e)}},E=function(e){var t=e.createBlog,n=Object(a.useState)(""),l=Object(s.a)(n,2),c=l[0],o=l[1],i=Object(a.useState)(""),u=Object(s.a)(i,2),m=u[0],f=u[1],d=Object(a.useState)(""),b=Object(s.a)(d,2),p=b[0],g=b[1];return r.a.createElement("div",{className:"col-auto",id:"boxed"},r.a.createElement("br",null),r.a.createElement("b",null,"Add a new blog"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:c,author:m,url:p}),o(""),f(""),g("")}},r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"title"},"title:"),r.a.createElement("input",{id:"title",type:"text",className:"form-control",value:c,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"author"},"author:"),r.a.createElement("input",{id:"author",type:"text",className:"form-control",value:m,onChange:function(e){f(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{id:"formlabel",htmlFor:"url"},"url:"),r.a.createElement("input",{id:"url",type:"text",className:"form-control",value:p,onChange:function(e){g(e.target.value)}})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",style:{float:"left",marginTop:"12px"}},"add"))))},v=function(e){var t=e.user,n=e.blog,l=e.likeBlog,c=e.deleteBlog,o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],f={display:u?"none":""},d={display:u?"":"none"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:f,id:"boxed"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"400px"}},r.a.createElement("em",null,r.a.createElement("a",{href:n.url},n.title)),r.a.createElement("em",null,n.author)),r.a.createElement("td",{style:{width:"50px"}},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return m(!0)}},"view"))))))),r.a.createElement("div",{style:d,id:"boxed"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"400px"}},r.a.createElement("em",null,r.a.createElement("a",{href:n.url},n.title)),r.a.createElement("em",null,n.author)),r.a.createElement("td",{style:{width:"50px"}},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return m(!1)}},"hide")))))),r.a.createElement("li",{className:"list-group-item"},n.url),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("div",null,"Likes: ",n.likes,r.a.createElement("button",{type:"button",className:"btn btn-success",id:"listbtnlike",style:{paddingLeft:"10px",width:"60px",marginLeft:"10px"},onClick:l},"+1"))),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"390px"}},n.user.name),t.name===n.user.name&&r.a.createElement("td",{style:{width:"60px"}},r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:c},"delete"))))))))},h=function(e){var t=e.rows;return r.a.createElement("div",null,r.a.createElement("b",null,"Blogs"),t)},y=function(e){var t=e.titleToFind,n=e.setTitleToFind,a=e.handleFindTitleChange;return r.a.createElement("form",{onChange:n},r.a.createElement("div",{align:"left"},r.a.createElement("label",{htmlFor:"filter"},"filter shown with:"),r.a.createElement("input",{id:"filter",type:"text",className:"form-control",value:t,onChange:a})))},w=r.a.forwardRef((function(e,t){var l=n(23).animateScroll,c=Object(a.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m={display:i?"none":""},f={display:i?"":"none"},d=function(){u(!i),i&&l.scrollToTop()};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("div",{style:m},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:d},e.buttonLabel)),r.a.createElement("div",{style:f},e.children,r.a.createElement("button",{className:"btn btn-primary",type:"submit",style:{float:"right"},onClick:d},"cancel")))})),O={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.loginUser,n=Object(a.useState)(""),l=Object(s.a)(n,2),c=l[0],o=l[1],i=Object(a.useState)(""),u=Object(s.a)(i,2),m=u[0],f=u[1];return r.a.createElement("div",{className:"form-group-inline"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:c,password:m}),o(""),f("")}},r.a.createElement("div",{align:"left",className:"form-group-inline"},r.a.createElement("label",{id:"formlabel",htmlFor:"username"},"username:"),r.a.createElement("input",{id:"username",type:"text",className:"form-control",name:"Username",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("label",{id:"formlabel",htmlFor:"password"},"password:"),r.a.createElement("input",{id:"password",type:"text",className:"form-control",name:"Password",value:m,onChange:function(e){f(e.target.value)}})),r.a.createElement("button",{className:"btn btn-primary",type:"submit",style:{float:"left"}},"login")))},k=function(){return r.a.createElement("div",{style:{color:"gray",fontStyle:"italic",fontSize:16}},r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("center",null,r.a.createElement("em",null,"Bloglist app, Full Stack Web Development"),r.a.createElement("br",null),r.a.createElement("em",null,"University of Helsinki 2020")))},x=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),l=t[0],c=t[1],o=Object(a.useState)(!0),d=Object(s.a)(o,2),b=d[0],p=d[1],x=Object(a.useState)(""),N=Object(s.a)(x,2),T=N[0],S=N[1],C=Object(a.useState)(null),F=Object(s.a)(C,2),B=F[0],L=F[1],D=Object(a.useState)(null),U=Object(s.a)(D,2),z=U[0],A=U[1],R=Object(a.useState)(null),I=Object(s.a)(R,2),J=I[0],V=I[1],q=Object(a.useRef)(),H=Object(a.useRef)(),P=n(23).animateScroll;Object(a.useEffect)((function(){g.getAll().then((function(e){c(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBloglistappUser");if(e){var t=JSON.parse(e);V(t),g.setToken(t.token)}}),[]);var W=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.username&&""!==t.password){e.next=6;break}L("both fields are required"),setTimeout((function(){L(null)}),4e3),H.current.toggleVisibility(),e.next=19;break;case 6:return e.prev=6,e.next=9,O.login(t);case 9:n=e.sent,window.localStorage.setItem("loggedBloglistappUser",JSON.stringify(n)),g.setToken(n.token),V(n),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),L("wrong username or password"),setTimeout((function(){L(null)}),4e3);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{V(null),window.localStorage.clear()}catch(n){L("".concat(n)),setTimeout((function(){L(null)}),4e3)}window.location.reload(),console.log("logged out successfully");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){S(e.target.value)},M=function(e){e.preventDefault(),""!==T&&p(!1)};function Q(e,t){return t.likes-e.likes}var X=b?l.sort(Q):l.filter((function(e){return e.title.toLowerCase().includes(T.toLowerCase())})).sort(Q),Y=function(e){q.current.toggleVisibility(),g.create(e).then((function(t){c(l.concat(t)),A("added ".concat(e.title," by ").concat(e.author)),setTimeout((function(){A(null)}),4e3)})).catch((function(e){L("".concat(e,", all fields are required")),setTimeout((function(){L(null)}),4e3)}))},Z=function(e){var t=l.find((function(t){return t.id===e})),n={user:t.user.id,likes:t.likes+1,author:t.author,title:t.title,url:t.url};g.update(t.id,n).then((function(e){c(l.map((function(n){return n.id!==t.id?n:e})))})).catch((function(e){P.scrollToTop(),L("".concat(e)),setTimeout((function(){L(null)}),4e3),c(l.filter((function(e){return e.id!==t.id})))}))},$=function(e){var t=l.find((function(t){return t.id===e}));window.confirm("Delete `".concat(t.title,"`?"))&&g.remove(e,t).then((function(){c(l.filter((function(t){return t.id!==e}))),P.scrollToTop(),A("deleted `".concat(t.title,"`")),setTimeout((function(){A(null)}),4e3)})).catch((function(e){P.scrollToTop(),L("".concat(e)),setTimeout((function(){L(null)}),4e3)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{id:"nav",className:"navbar navbar-light bg-light"},r.a.createElement("strong",null,"Bloglist"),null!==J?r.a.createElement("div",null,J.name," logged in",r.a.createElement("button",{className:"btn btn-primary ml-2",type:"submit",onClick:G},"Logout")):r.a.createElement(w,{buttonLabel:"sign in",ref:H},r.a.createElement(j,{loginUser:W}))),r.a.createElement("div",{className:"container"},r.a.createElement(f,{message:z}),r.a.createElement(m,{message:B}),null!==J&&r.a.createElement(w,{buttonLabel:"new blog",ref:q},r.a.createElement(E,{createBlog:Y})),null!==J&&r.a.createElement("div",{className:"col-auto"},r.a.createElement(y,{setTitleToFind:M,titleToFind:T,handleFindTitleChange:K}),r.a.createElement("br",null),r.a.createElement(h,{rows:X.map((function(e){return r.a.createElement(v,{key:e.id,user:J,blog:e,likeBlog:function(){return Z(e.id)},deleteBlog:function(){return $(e.id)}})}))})),r.a.createElement(k,null)))};n(60);c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.58f8b28e.chunk.js.map